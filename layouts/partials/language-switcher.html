<div class="language-switcher">
    {{ $siteLanguages := site.Languages }}
    {{ $pageLang := .Page.Lang }}
    <select onchange="window.location.pathname = window.location.pathname.replace(/^\/[^\/]+/, '/' + this.value)">
    {{ range .Site.Languages }}
        {{ $langCode := .Lang }}
        {{ $langName := .LanguageName }}
        <option value="{{ .Lang }}" {{ if eq $pageLang .Lang }}selected{{ end }}>
            {{ .LanguageName }}
        </option>
    {{ end }}
    </select>
</div> 